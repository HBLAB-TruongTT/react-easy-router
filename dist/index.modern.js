import{useState as t,createContext as e,useContext as n,useEffect as r}from"react";import{Navigate as i,Route as o,Routes as a}from"react-router-dom";import{jsx as c}from"react/jsx-runtime";function l(){return l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l.apply(this,arguments)}const u=/*#__PURE__*/e(),h=/*#__PURE__*/e();function d(){return n(h)}function s({isAuthenticated:e,showLoader:n=!0,loader:r,children:i}){const[o,a]=t(null),[l]=t({isAuthenticated:e,showLoader:n,loader:r});/*#__PURE__*/return c(u.Provider,{value:{auth:o,setAuth:a},children:/*#__PURE__*/c(h.Provider,{value:{config:l},children:i})})}function f(){const{config:t}=d();/*#__PURE__*/return c("div",{className:"loader",style:{height:"100vh",width:"100%",backgroundColor:"white",position:"absolute",zIndex:1e3,display:"flex",justifyContent:"center",alignItems:"center"},children:/*#__PURE__*/c("img",{src:t.loader||"https://i.imgur.com/FhvNntt.gif",alt:"loader"})})}function p({failureRedirect:t="/",children:e}){const{auth:o,setAuth:a}=n(u),{config:{isAuthenticated:l,showLoader:h}}=d();return r(()=>{l?l().then(t=>{a(t)}).catch(()=>a(!1)):a(!1)},[l,a]),null===o?h&&/*#__PURE__*/c(f,{}):o?e:/*#__PURE__*/c(i,{to:t})}function m(t){/*#__PURE__*/return c(o,t.navigate?{path:t.path,element:/*#__PURE__*/c(i,{to:t.navigate})}:t.protected?{path:t.path,element:/*#__PURE__*/c(p,{failureRedirect:t.failureRedirect,children:t.element})}:{path:t.path,element:t.element},t.path)}function g(t,e=""){const n=t.map(t=>{t.path=function(t,e){const n=t.split("/"),r=e.split("/"),i=[...new Set([...n,...r])].join("/");return"/"===i[0]?i:`/${i}`}(e,t.path);let n=[];return t.children&&(n=g(t.children,t.path)),[...n,m(t)]});return n.flat()}function v(t){/*#__PURE__*/return c(s,l({},t,{children:/*#__PURE__*/c(a,{children:g(t.routes)})}))}export{v as default};
//# sourceMappingURL=index.modern.js.map
