!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("react-router-dom")):"function"==typeof define&&define.amd?define(["react","react-router-dom"],t):(e||self).reactEasyRouter=t(e.react,e.reactRouterDom)}(this,function(e,t){function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=/*#__PURE__*/n(e);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}var l=/*#__PURE__*/e.createContext(null),o=/*#__PURE__*/e.createContext(null);function u(){return e.useContext(o)}function i(t){var n=t.isAuthenticated,a=t.showLoader,u=void 0===a||a,i=t.loader,c=void 0===i?"https://i.imgur.com/FhvNntt.gif":i,f=t.children,d=e.useState(null),s=d[0],h=d[1],p=e.useState({isAuthenticated:n,showLoader:u,loader:c});/*#__PURE__*/return r.default.createElement(l.Provider,{value:{auth:s,setAuth:h}},/*#__PURE__*/r.default.createElement(o.Provider,{value:{config:p[0]}},f))}function c(){var e=u();/*#__PURE__*/return r.default.createElement("div",{className:"loader",style:{height:"100vh",width:"100%",backgroundColor:"white",position:"absolute",zIndex:1e3,display:"flex",justifyContent:"center",alignItems:"center"}},/*#__PURE__*/r.default.createElement("img",{src:e.config.loader,alt:"loader"}))}function f(n){var a=n.failureRedirect,o=void 0===a?"/":a,i=n.roles,f=n.children,d=e.useContext(l),s=d.auth,h=d.setAuth,p=u().config,m=p.isAuthenticated,v=p.showLoader;return e.useEffect(function(){m?m().then(function(e){if(e){if(null!=i&&i.length&&i.includes(e.role))return h(!0);h(null==i||!i.length)}else h(!1)}).catch(function(){return h(!1)}):h(!1)},[m,h]),null===s?v&&/*#__PURE__*/r.default.createElement(c,null):s?f:/*#__PURE__*/r.default.createElement(t.Navigate,{to:o})}function d(e){/*#__PURE__*/return r.default.createElement(t.Route,e.navigate?{key:e.path,path:e.path,element:/*#__PURE__*/r.default.createElement(t.Navigate,{to:e.navigate})}:e.protected?{key:e.path,path:e.path,element:/*#__PURE__*/r.default.createElement(f,{failureRedirect:e.failureRedirect,roles:e.roles},e.element)}:{key:e.path,path:e.path,element:e.element})}function s(e,t){void 0===t&&(t="");var n=e.map(function(e){e.path=function(e,t){var n=e.split("/"),r=t.split("/"),a=[].concat(new Set([].concat(n,r))).join("/");return"/"===a[0]?a:"/"+a}(t,e.path);var n=[];return e.children&&(n=s(e.children,e.path)),[].concat(n,[d(e)])});return n.flat()}return function(e){/*#__PURE__*/return r.default.createElement(i,a({},e),/*#__PURE__*/r.default.createElement(t.Routes,null,s(e.routes)))}});
//# sourceMappingURL=index.umd.js.map
