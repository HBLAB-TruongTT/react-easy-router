import{useState as t,createContext as e,useContext as r,useEffect as n}from"react";import{Navigate as i,Route as a,Routes as o}from"react-router-dom";import{jsx as c}from"react/jsx-runtime";function u(){return u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u.apply(this,arguments)}var l=/*#__PURE__*/e(),h=/*#__PURE__*/e();function d(){return r(h)}function f(e){var r=e.isAuthenticated,n=e.showLoader,i=void 0===n||n,a=e.loader,o=e.children,u=t(null),d=u[0],f=u[1],s=t({isAuthenticated:r,showLoader:i,loader:a});/*#__PURE__*/return c(l.Provider,{value:{auth:d,setAuth:f},children:/*#__PURE__*/c(h.Provider,{value:{config:s[0]},children:o})})}function s(){var t=d();/*#__PURE__*/return c("div",{className:"loader",style:{height:"100vh",width:"100%",backgroundColor:"white",position:"absolute",zIndex:1e3,display:"flex",justifyContent:"center",alignItems:"center"},children:/*#__PURE__*/c("img",{src:t.config.loader||"https://i.imgur.com/FhvNntt.gif",alt:"loader"})})}function p(t){var e=t.failureRedirect,a=void 0===e?"/":e,o=t.children,u=r(l),h=u.auth,f=u.setAuth,p=d().config,v=p.isAuthenticated,m=p.showLoader;return n(function(){v?v().then(function(t){f(t)}).catch(function(){return f(!1)}):f(!1)},[v,f]),null===h?m&&/*#__PURE__*/c(s,{}):h?o:/*#__PURE__*/c(i,{to:a})}function v(t){/*#__PURE__*/return c(a,t.navigate?{path:t.path,element:/*#__PURE__*/c(i,{to:t.navigate})}:t.protected?{path:t.path,element:/*#__PURE__*/c(p,{failureRedirect:t.failureRedirect,children:t.element})}:{path:t.path,element:t.element},t.path)}function m(t,e){void 0===e&&(e="");var r=t.map(function(t){t.path=function(t,e){var r=t.split("/"),n=e.split("/"),i=[].concat(new Set([].concat(r,n))).join("/");return"/"===i[0]?i:"/"+i}(e,t.path);var r=[];return t.children&&(r=m(t.children,t.path)),[].concat(r,[v(t)])});return r.flat()}function g(t){/*#__PURE__*/return c(f,u({},t,{children:/*#__PURE__*/c(o,{children:m(t.routes)})}))}export{g as default};
//# sourceMappingURL=index.module.js.map
