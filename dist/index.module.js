import e,{useState as t,createContext as n,useContext as r,useEffect as a}from"react";import{Navigate as l,Route as i,Routes as o}from"react-router-dom";function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var u=/*#__PURE__*/n(null),h=/*#__PURE__*/n(null);function d(){return r(h)}function s(n){var r=n.isAuthenticated,a=n.showLoader,l=void 0===a||a,i=n.loader,o=void 0===i?"https://i.imgur.com/FhvNntt.gif":i,c=n.children,d=t(null),s=d[0],f=d[1],m=t({isAuthenticated:r,showLoader:l,loader:o});/*#__PURE__*/return e.createElement(u.Provider,{value:{auth:s,setAuth:f}},/*#__PURE__*/e.createElement(h.Provider,{value:{config:m[0]}},c))}function f(){var t=d();/*#__PURE__*/return e.createElement("div",{className:"loader",style:{height:"100vh",width:"100%",backgroundColor:"white",position:"absolute",zIndex:1e3,display:"flex",justifyContent:"center",alignItems:"center"}},/*#__PURE__*/e.createElement("img",{src:t.config.loader,alt:"loader"}))}function m(t){var n=t.failureRedirect,i=void 0===n?"/":n,o=t.roles,c=t.children,h=r(u),s=h.auth,m=h.setAuth,p=d().config,v=p.isAuthenticated,g=p.showLoader;return a(function(){v?v().then(function(e){if(e){if(null!=o&&o.length&&o.includes(e.role))return m(!0);m(null==o||!o.length)}else m(!1)}).catch(function(){return m(!1)}):m(!1)},[v,m]),null===s?g&&/*#__PURE__*/e.createElement(f,null):s?c:/*#__PURE__*/e.createElement(l,{to:i})}function p(t){/*#__PURE__*/return e.createElement(i,t.navigate?{key:t.path,path:t.path,element:/*#__PURE__*/e.createElement(l,{to:t.navigate})}:t.protected?{key:t.path,path:t.path,element:/*#__PURE__*/e.createElement(m,{failureRedirect:t.failureRedirect,roles:t.roles},t.element)}:{key:t.path,path:t.path,element:t.element})}function v(e,t){void 0===t&&(t="");var n=e.map(function(e){e.path=function(e,t){var n=e.split("/"),r=t.split("/"),a=[].concat(new Set([].concat(n,r))).join("/");return"/"===a[0]?a:"/"+a}(t,e.path);var n=[];return e.children&&(n=v(e.children,e.path)),[].concat(n,[p(e)])});return n.flat()}function g(t){/*#__PURE__*/return e.createElement(s,c({},t),/*#__PURE__*/e.createElement(o,null,v(t.routes)))}export{g as default};
//# sourceMappingURL=index.module.js.map
